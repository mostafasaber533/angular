<!-- <h1>Select Your Product</h1>
<select class="form-select" [(ngModel)]="SelectedCatId" (change)="FilteredByCatId()">
  @for (c of CatList ; track c) {
    <option value="{{c.id}}">{{c.name}}</option>
  }

</select> -->
<!-- <h1>{{SelectedCatId}}</h1>
 --><hr>
<div class="container mt-4">
  <div class="row">
    @for (i of FilteredList; track i.id) {
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <!-- Image with error handling -->
          <img [src]="i.imageUrl"
               class="card-img-top"
               [alt]="i.name"
               style="height: 200px; object-fit: contain;"
               (error)="i.imageUrl = 'https://via.placeholder.com/200'">

          <div class="card-body">
            <h5 class="card-title">{{i.name}}</h5>

            <!-- Category badge -->
            <span class="badge" [ngClass]="i.catagoryId === 1 ? 'bg-primary' : 'bg-success'">
              {{i.catagoryId === 1 ? 'Others' : 'Electronics'}}
            </span>

            <!-- Description with truncate -->
            <p class="card-text text-muted small mt-2">
              {{i.description.length > 100 ? (i.description | slice:0:100) + '...' : i.description}}
            </p>

            <!-- Price and stock status -->
            <p class="card-text">
              <small class="text-muted">Price: {{i.price | currency}}</small>
            </p>
            <p class="card-text"
               [ngClass]="{
                 'text-danger': i.quantity === 0,
                 'text-warning': i.quantity === 1
               }">
              <span>
                @if (i.quantity === 0) {
                  Sold Out
                } @else if (i.quantity === 1) {
                  Last One!
                } @else {
                  Stock: {{i.quantity}}
                }
              </span>
            </p>

            <div class="d-flex flex-column gap-2">
              <app-buy-button
                [product]="i"
                (purchase)="handlePurchase($event)">
              </app-buy-button>
              <a class="btn btn-outline-dark" [routerLink]="['/products', i.id]">See More</a>
            </div>
          </div>
        </div>
      </div>
    }
  </div>
  <div class="mt-3">
    <h4>Total: {{Total | currency}}</h4>
  </div>
</div>

